
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.5.0
  creationTimestamp: null
  name: nodelocalstorages.csi.aliyun.com
spec:
  group: csi.aliyun.com
  names:
    kind: NodeLocalStorage
    listKind: NodeLocalStorageList
    plural: nodelocalstorages
    shortNames:
    - nls
    singular: nodelocalstorage
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.nodeStorageInfo.state.type
      name: State
      type: string
    - jsonPath: .status.nodeStorageInfo.phase
      name: Phase
      type: string
    - jsonPath: .status.nodeStorageInfo.state.lastHeartbeatTime
      name: AgentUpdateAt
      type: date
    - jsonPath: .status.filteredStorageInfo.updateStatusInfo.lastUpdateTime
      name: SchedulerUpdateAt
      type: date
    - jsonPath: .status.filteredStorageInfo.updateStatusInfo.updateStatus
      name: SchedulerUpdateStatus
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: NodeLocalStorage is the Schema for the nodelocalstorages API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: NodeLocalStorageSpec defines the desired state of NodeLocalStorage
            properties:
              localVolumeConfigs:
                items:
                  properties:
                    localVolumeResourceToBeInited:
                      items:
                        properties:
                          parameters:
                            items:
                              properties:
                                key:
                                  type: string
                                values:
                                  items:
                                    type: string
                                  type: array
                              type: object
                            type: array
                        type: object
                      type: array
                    parameters:
                      items:
                        properties:
                          key:
                            type: string
                          values:
                            items:
                              type: string
                            type: array
                        type: object
                      type: array
                    volumeType:
                      description: LVM, SPDK, or any others
                      type: string
                  type: object
                type: array
              nodeName:
                description: NodeName is the kube node name
                maxLength: 128
                minLength: 1
                type: string
            type: object
          status:
            description: NodeLocalStorageStatus defines the observed state of NodeLocalStorage
            properties:
              filteredStorageInfo:
                description: FilteredStorageInfo is info of the storage resources of the node, which is picked by Filtered Scheduler according to ListConfig
                properties:
                  devices:
                    description: Devices is block devices picked by Filtered according to WhitelistDevices/BlacklistDevices
                    items:
                      type: string
                    type: array
                  mountPoints:
                    description: MountPoints is mount points picked by Filtered according to WhitelistMountPoints/BlacklistMountPoints
                    items:
                      type: string
                    type: array
                  updateStatusInfo:
                    properties:
                      lastUpdateTime:
                        format: date-time
                        type: string
                      reason:
                        type: string
                      updateStatus:
                        type: string
                    type: object
                  volumeGroups:
                    description: 'VolumePools is LVM vgs picked by Filtered according to WhitelistVGs/BlacklistVGs todo: change to volumePool'
                    items:
                      type: string
                    type: array
                type: object
              nodeStorageInfo:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state of cluster Important: Run "make" to regenerate code after modifying this file'
                properties:
                  deviceInfo:
                    description: DeviceInfos is the block device on node
                    items:
                      description: DeviceInfos is a raw block device on host
                      properties:
                        condition:
                          description: Condition is the condition for mount point
                          type: string
                        mediaType:
                          description: MediaType is the media type like ssd/hdd
                          type: string
                        name:
                          description: Name is the block device name
                          type: string
                        readOnly:
                          description: ReadOnly indicates whether the device is ready-only
                          type: boolean
                        total:
                          description: Total is the raw block device size
                          format: int64
                          type: integer
                      required:
                      - readOnly
                      - total
                      type: object
                    type: array
                  mountPoints:
                    description: MountPoints is the list of mount points on node
                    items:
                      description: MountPoint is the mount point on a node
                      properties:
                        available:
                          description: Available is the free size for mount point
                          format: int64
                          type: integer
                        condition:
                          description: Condition is the condition for mount point
                          type: string
                        device:
                          description: Device is the device underlying the mount point
                          type: string
                        fsType:
                          description: FsType is filesystem type
                          type: string
                        isBind:
                          description: IsBind indicates whether the mount point is a bind
                          type: boolean
                        name:
                          description: Name is the mount point name
                          type: string
                        options:
                          description: Options is a list of mount options
                          items:
                            type: string
                          type: array
                        readOnly:
                          description: ReadOnly indicates whether the mount point is read-only
                          type: boolean
                        total:
                          description: Total is the size of mount point
                          format: int64
                          type: integer
                      required:
                      - available
                      - isBind
                      - readOnly
                      - total
                      type: object
                    type: array
                  phase:
                    description: Phase is the current lifecycle phase of the node storage.
                    type: string
                  state:
                    description: State is the last state of node local storage.
                    properties:
                      lastHeartbeatTime:
                        format: date-time
                        type: string
                      lastTransitionTime:
                        format: date-time
                        type: string
                      message:
                        type: string
                      reason:
                        type: string
                      status:
                        type: string
                      type:
                        type: string
                    type: object
                  volumeGroups:
                    description: 'VolumePools is LVM vgs todo: local volume pool'
                    items:
                      description: VolumePool
                      properties:
                        allocatable:
                          description: Allocatable is the free size for Filtered
                          format: int64
                          type: integer
                        available:
                          description: Available is the free size for volume pool
                          format: int64
                          type: integer
                        condition:
                          description: Condition is the condition for Volume group
                          type: string
                        localVolumes:
                          description: LocalVolumes
                          items:
                            description: LocalVolume
                            properties:
                              condition:
                                description: Condition is the condition for LocalVolume
                                type: string
                              name:
                                description: Name is the local volume name
                                type: string
                              readOnly:
                                description: ReadOnly indicates whether the local volume is read-only
                                type: boolean
                              total:
                                description: Size is the local volume size
                                format: int64
                                type: integer
                              volumePoolName:
                                description: VolumePoolName
                                type: string
                            required:
                            - name
                            - total
                            - volumePoolName
                            type: object
                          type: array
                        name:
                          description: Name is the volumePool name
                          type: string
                        total:
                          description: Total is the volume pool size
                          format: int64
                          type: integer
                        volumeType:
                          description: LVM,SPDK
                          type: string
                      required:
                      - allocatable
                      - available
                      - name
                      - total
                      type: object
                    type: array
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
